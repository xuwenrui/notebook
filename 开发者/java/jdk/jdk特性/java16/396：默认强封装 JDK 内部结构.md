Java 16 引入了一个重要的变化，即 JEP 396（Strong encapsulation of JDK internals），这一改进强化了对JDK内部实现的封装。这意味着Java 16默认对JDK的内部API和非标准的反射访问进行了更严格的限制，以促进更好的模块化和减少对外部代码依赖JDK内部细节的风险。

### JEP 396 强封装的要点：

- **默认强封装**：在此JEP之前，尽管Java 9引入了模块系统以增强封装性，但为了保持向后兼容性，许多JDK模块仍然允许未经许可的访问。Java 16改变了这一策略，现在默认禁止对JDK内部包的访问，除非显式地允许。
    
- **--illegal-access**标志调整：以前的Java版本中，可以通过`--illegal-access=permit`标志来允许对内部API的访问，但在Java 16中，这个标志被弃用，鼓励开发者移除对内部API的依赖。
    
- **迁移工具和警告**：为了帮助迁移，Java编译器和运行时会发出警告，指示哪些代码尝试访问了不应公开的内部API。开发者应根据这些警告来修改代码，避免使用JDK内部元素。
    
- **反射访问控制**：对反射API的使用也受到了更严格的控制，要求明确的打开模块或使用新的反射访问控制工具（如`java.lang.reflect.AccessibleObject::setAccessible`）来绕过封装，但这应当谨慎使用，并作为最后的手段。