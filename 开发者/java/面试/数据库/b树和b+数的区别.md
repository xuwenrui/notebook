1. **数据存储位置**：
    
    - **B 树**：所有节点（包括内部节点和叶子节点）都存储键值。
    - **B+ 树**：只有叶子节点存储键值和相关数据或数据指针，内部节点仅存储键值用于指导搜索路径。
2. **叶子节点连接**：
    
    - **B 树**：叶子节点之间没有连接。
    - **B+ 树**：叶子节点通过指针相连，形成一个双向链表。
3. **查询性能**：
    
    - **B 树**：适合于单个键值的查找。
    - **B+ 树**：更适合于范围查询，因为叶子节点之间的连接使得遍历连续的键值变得非常简单。
4. **更新性能**：
    
    - **B 树**：由于内部节点也存储数据，因此在插入或删除时可能需要调整多个节点。
    - **B+ 树**：由于数据仅存储在叶子节点中，因此插入或删除操作只需调整叶子节点即可。




#### 叶子节点
在 MySQL 的 InnoDB 存储引擎中，B+ 树的叶子节点确实是以页面（Page）的形式存储的，默认页面大小为 16KB。这意味着每个叶子节点实际上就是一个 16KB 的页面。然而，需要注意的是，页面中存储了多少键值和数据项取决于键值的实际大小以及页面中的其他元数据。

每个节点大小为16k，超过了会动态调整

### 非叶子节点的内容

非叶子节点主要用于存储键值（Keys）和指向子节点的指针（Pointers）。具体来说，非叶子节点包含以下内容：

1. **键值（Keys）**：
    
    - 非叶子节点包含一系列键值，这些键值用于划分子树的范围。每个键值将子树分为左右两部分，左子树包含小于该键值的所有键值，右子树包含大于该键值的所有键值。
    - 键值通常按照从小到大的顺序存储。
2. **子节点指针（Pointers to Children）**：
    
    - 每个键值对应一个或多个子节点指针，这些指针指向相应的子节点。
    - 对于内部节点，每个键值至少对应一个子节点指针，最后一个键值可能对应两个子节点指针。


### 节点Key
在 MySQL 的 InnoDB 存储引擎中，B+ 树索引节点中的键值（Key）具体是什么，取决于索引的类型。不同的索引类型有不同的键值内容。以下是一些常见的索引类型及其键值内容：

### 1. 聚簇索引（Clustered Index）

在 InnoDB 中，主键索引（Primary Key Index）是聚簇索引。聚簇索引决定了表中数据的物理存储顺序。这意味着表数据行本身是按照主键的顺序存储的。

- **键值**：聚簇索引的键值是主键的值。
- **数据**：聚簇索引的叶子节点存储了完整的数据行。

### 2. 辅助索引（Secondary Index）

辅助索引包括非主键的唯一索引和普通索引。辅助索引的键值是索引字段的值，而不是主键或行号。

- **键值**：辅助索引的键值是索引字段的值。
- **数据**：辅助索引的叶子节点存储了主键的值（而不是完整的数据行），这样可以在找到主键值后通过主键索引快速定位到实际的数据行。


### 索引字段大小的影响

1. **键值大小**：
    
    - 索引字段的大小直接影响每个键值的大小。键值越大，每个节点能够存储的键值数量就越少。
    - 如果键值较大，那么每个节点所能存储的键值数量就会减少，导致树的高度可能会增加。
2. **节点容量**：
    
    - 每个节点的容量是固定的，通常由页面大小（例如 InnoDB 中的 16KB）决定。
    - 如果键值较大，每个节点所能容纳的键值数量就会减少，从而可能导致更多的节点层级，即树的高度增加。
3. **树的高度**：
    
    - 树的高度是指从根节点到叶子节点的最长路径的节点数量。
    - 如果每个节点能够存储的键值数量减少，那么为了存储同样数量的键值，树的高度可能会增加。

#### 索引字段较小的情况

假设索引字段很小，例如每个键值占用 10 字节：

- 每个节点可以存储大约 1638410≈16381016384​≈1638 个键值。

#### 索引字段较大的情况

假设索引字段较大，例如每个键值占用 100 字节：

- 每个节点可以存储大约 16384100≈16310016384​≈163 个键值。

### 对比分析

- **较小的键值**：每个节点可以存储更多键值，树的高度相对较矮。
- **较大的键值**：每个节点可以存储的键值较少，树的高度相对较长。

### 影响因素
1. **键值大小**：
    - 索引字段的大小直接影响键值的大小。
    - 键值越大，每个节点能存储的键值越少。
2. **页面大小**：
    - 页面大小固定，键值大小的变化直接影响每个节点能存储的键值数量。
3. **数据分布**：
    - 数据的分布情况也会影响树的高度。如果数据分布均匀，树的高度可能更稳定；如果数据分布不均匀，树的高度可能会受到更多影响。